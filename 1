local lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/REDzHUB/RedzLibV4/main/Source.lua"))()

local Window = lib:MakeWindow({
    Title = "Tw and Rave Dh : V1",
    SubTitle = "by : TWRAVE",
    LoadText = "TwRaveHub",
    Flags = "TwRave Hub | Example.lua"
})

-- MAIN PAGE
local MainTab = Window:MakeTab({Name = "Main", Icon = "Home"})
local MainSection = MainTab:AddSection({"Main Section"})

-- ESP toggle
local ESPEnabled = false

local SideTab = Window:MakeTab({Name = "Side", Icon = "Home"})
local SideSection = SideTab:AddSection({"Side Section"})
local ESPtoggle = SideTab:AddToggle({
    Name = "ESP Toggle",
    Default = false,
    Callback = function(Value)
        ESPEnabled = Value
    end
})

local Players = game:GetService("Players"):GetChildren()
local RunService = game:GetService("RunService")
local highlight = Instance.new("Highlight")
highlight.Name = "Highlight"

-- Function to highlight players
local function highlightPlayers()
    for i, player in pairs(Players) do
        repeat wait() until player.Character
        if not player.Character:FindFirstChild("HumanoidRootPart"):FindFirstChild("Highlight") then
            local highlightClone = highlight:Clone()
            highlightClone.Adornee = player.Character:FindFirstChild("HumanoidRootPart")
            highlightClone.Parent = player.Character:FindFirstChild("HumanoidRootPart")
            highlightClone.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            highlightClone.Name = "Highlight"
        end
    end
end

-- Highlight existing players and listen for new ones
for i, player in pairs(Players) do
    player.CharacterAdded:Connect(function(character)
        repeat wait() until character:FindFirstChild("HumanoidRootPart")
        if not character:FindFirstChild("HumanoidRootPart"):FindFirstChild("Highlight") then
            local highlightClone = highlight:Clone()
            highlightClone.Adornee = character:FindFirstChild("HumanoidRootPart")
            highlightClone.Parent = character:FindFirstChild("HumanoidRootPart")
            highlightClone.Name = "Highlight"
        end
    end)
end

-- Listen for players leaving
game.Players.PlayerRemoving:Connect(function(playerRemoved)
    playerRemoved.Character:FindFirstChild("HumanoidRootPart").Highlight:Destroy()
end)

-- Continuously highlight players
RunService.Heartbeat:Connect(function()
    if ESPEnabled then
        highlightPlayers()
    end
end)
